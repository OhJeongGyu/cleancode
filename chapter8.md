### 2017. 2. 23 
# 경계
---
> 외부 패키지, 혹은 오픈소스를 사용할 때 소프트웨어의 경계를 깔끔하게 처리해야 한다.

###외부 코드 사용하기
Java의 ```Map``` 클래스에는 어떠한 자료도 넣을 수 있다.

```
Map sensors = new HashMap();
sensors s = (Sensor) sensors.get(sensorId);
```
위의 코드는 지저분하지만, 작동은 한다. 내부에 저장된 자료를 얻기 위하여 쓸데없는 코드가 많이 필요하다.

```Generics```를 사용한 방법

```
Map<String, Sensor> sensors = new Hashmap<>();
...
Sensor s = sensors.get(sensorId);
...
```
 제네릭스를 사용하면 사용자에게 필요하지 않은 기능까지 제공한다. 즉, ```Map<string, Sensor>``` 인스턴스를 여기저기 넘긴다면, ```Map``` 인스턴스가 변할 경우, 수정해야 할 코드가 상당히 많아진다. 
제네릭스를 금지하는 코드도 많았다.

제네릭스를 사용하지 않고, 다음과 같이 작성할 수 있다.
```
public class Sensors {
  private Map sensors = new HashMap();
  public Sensor getById(String id) {
    return (Sensor) sensors.get(id);
  }
}
```

위 코드의 장점은 ```Sensors``` 클래스 내부에서 객체 유형을 관하는 것이다.

### 경계 살피고 익히기
외부 코드를 사용하는 것은 어렵다. 곧바로 나의 코드에 외부 코드를 붙이지 말고 내 코드의 테스트 케이스를 작성해 테스트하고, 외부 코드를 익힌 후 추가하라.

### log4j 익히기

### 학습 테스트는 공짜 이상이다.

### 아직 존재하지 않는 코드를 사용하기
무선통신 시스템에서 매우 먼.. 송신기 시스템을 책임진 사람들이 있었다. 상대편이 API를 설계하지 않았기에 어떻게 작동하는지, 구현은 어떻게 될 지 모른다. 이쪽의 코드를 진행하고자 자체적인 인터페이스를 정의했다. Transmitter라는 클래스를 정의하고 Transmit이라는 메서드를 정의하였다. 이 메서드는 주파수와 자료 스트림을 입력으로 받았다. 이렇게 먼저 자신이 바라는 인터페이스를 구현하여 통제권을 얻는다.  우리가 바라는 형태의 인터페이스이기 때문에 가독성과 코드의 의도를 분명히 할 수 있다. 

### 깨끗한 경계
설계가 우수하다면 ```변경```이라는 작업에 큰 투자와 재작업이 필요하지 않다. 통제 불가능한 코드를 사용할 때는 많은 투자를 하거나 향후 변경 비용이 지나치게 커지지 않게 조심한다. 
통제가 불가능한 외부 패키지에 의존하기 보다 자신의 코드에 의존하는 편이 낫다!
외부 패키지 접근 코드를 가능한 줄여 경계를 관리하자. 




































